(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-945dcf0c"],{"159b":function(t,e,a){var r=a("da84"),n=a("fdbc"),o=a("17c2"),s=a("9112");for(var i in n){var c=r[i],u=c&&c.prototype;if(u&&u.forEach!==o)try{s(u,"forEach",o)}catch(f){u.forEach=o}}},"17c2":function(t,e,a){"use strict";var r=a("b727").forEach,n=a("a640"),o=a("ae40"),s=n("forEach"),i=o("forEach");t.exports=s&&i?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"305b":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"secure"},[a("div",{staticClass:"top"},[a("van-row",[a("van-col",{attrs:{span:"4"}},[a("van-icon",{staticClass:"icon",attrs:{name:"arrow-left",size:"24",color:"#fff"},on:{click:function(e){return t.$router.go(-1)}}})],1),a("van-col",{attrs:{span:"16"}},[a("h3",[t._v("安全中心")])]),a("van-col",{attrs:{span:"4"}},[a("van-icon",{staticClass:"icon",attrs:{name:"bars",size:"24",color:"#fff"},on:{click:t.logout}})],1)],1)],1),a("div",{staticClass:"btns"},[a("van-button",{attrs:{type:"default",block:""},on:{click:t.showActionSheet}},[t._v("修改密码")]),a("van-button",{staticClass:"destroy",attrs:{type:"default",block:""},on:{click:t.destroyAccount}},[t._v("注销账号")])],1),a("van-action-sheet",{attrs:{title:"修改密码"},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[a("van-form",{on:{submit:t.updatePassword}},[a("van-field",{attrs:{type:"text",name:"旧密码",label:"旧密码",placeholder:"旧密码(6-16位)"},model:{value:t.userInfo.oldPassword,callback:function(e){t.$set(t.userInfo,"oldPassword",e)},expression:"userInfo.oldPassword"}}),a("van-field",{attrs:{type:"text",name:"新密码",label:"新密码",placeholder:"新密码(6-16位)"},model:{value:t.userInfo.password,callback:function(e){t.$set(t.userInfo,"password",e)},expression:"userInfo.password"}}),a("div",{staticStyle:{margin:"16px"}},[a("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("提交")])],1)],1)],1)],1)},n=[],o=a("cc73"),s=a("fa7d"),i={name:"Secure",data:function(){return{isShow:!1,userInfo:{oldPassword:"",password:""}}},methods:{back:function(){this.$router.go(-1)},showActionSheet:function(){this.isShow=!0},updatePassword:function(){var t=this;if(o["a"].validForm(this.userInfo,this)){if(this.userInfo.password==this.userInfo.oldPassword)return void this.$toast("新密码不能和旧密码一致");var e=localStorage.getItem("_t");this.$toast.loading({forbidClick:!0,duration:0,message:"加载中..."}),this.axios({method:"POST",url:"/updatePassword",data:{appkey:this.appkey,tokenString:e,oldPassword:this.userInfo.oldPassword,password:this.userInfo.password},transformRequest:s["a"].transformRequest}).then((function(e){t.$toast.clear(),"E001"===e.data.code?(t.isShow=!1,localStorage.removeItem("_t"),t.$router.push({name:"Classlist"})):t.$toast(e.data.msg)})).catch((function(e){t.$toast.clear()}))}},logout:function(){var t=this,e=localStorage.getItem("_t");this.$toast.loading({forbidClick:!0,duration:0,message:"加载中..."}),this.axios({method:"POST",url:"/logout",data:{appkey:this.appkey,tokenString:e},transformRequest:s["a"].transformRequest}).then((function(e){t.$toast.clear(),localStorage.removeItem("_t"),t.$router.push({name:"Login"})})).catch((function(e){t.$toast.clear()}))},destroyAccount:function(){var t=this;this.$dialog.confirm({title:"注销账号",message:"是否确定注销，一旦确认注销就无法恢复"}).then((function(e){if("confirm"==e){var a=localStorage.getItem("_t");t.$toast.loading({forbidClick:!0,duration:0,message:"加载中..."}),t.axios({method:"POST",url:"/destroyAccount",data:{appkey:t.appkey,tokenString:a},transformRequest:s["a"].transformRequest}).then((function(e){t.$toast.clear(),localStorage.removeItem("_t"),t.$router.push({name:"Classlist"})})).catch((function(e){t.$toast.clear()}))}})).catch((function(t){}))}}},c=i,u=(a("6b42"),a("2877")),f=Object(u["a"])(c,r,n,!1,null,"4f7fced0",null);e["default"]=f.exports},"33a7":function(t,e,a){},4160:function(t,e,a){"use strict";var r=a("23e7"),n=a("17c2");r({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"4d63":function(t,e,a){var r=a("83ab"),n=a("da84"),o=a("94ca"),s=a("7156"),i=a("9bf2").f,c=a("241c").f,u=a("44e7"),f=a("ad6d"),l=a("9f7f"),d=a("6eeb"),h=a("d039"),v=a("69f3").set,g=a("2626"),p=a("b622"),b=p("match"),m=n.RegExp,w=m.prototype,y=/a/g,k=/a/g,$=new m(y)!==y,S=l.UNSUPPORTED_Y,E=r&&o("RegExp",!$||S||h((function(){return k[b]=!1,m(y)!=y||m(k)==k||"/a/i"!=m(y,"i")})));if(E){var x=function(t,e){var a,r=this instanceof x,n=u(t),o=void 0===e;if(!r&&n&&t.constructor===x&&o)return t;$?n&&!o&&(t=t.source):t instanceof x&&(o&&(e=f.call(t)),t=t.source),S&&(a=!!e&&e.indexOf("y")>-1,a&&(e=e.replace(/y/g,"")));var i=s($?new m(t,e):m(t,e),r?this:w,x);return S&&a&&v(i,{sticky:a}),i},I=function(t){t in x||i(x,t,{configurable:!0,get:function(){return m[t]},set:function(e){m[t]=e}})},P=c(m),R=0;while(P.length>R)I(P[R++]);w.constructor=x,x.prototype=w,d(n,"RegExp",x)}g("RegExp")},5319:function(t,e,a){"use strict";var r=a("d784"),n=a("825a"),o=a("7b0b"),s=a("50c4"),i=a("a691"),c=a("1d80"),u=a("8aa5"),f=a("14c3"),l=Math.max,d=Math.min,h=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g,p=function(t){return void 0===t?t:String(t)};r("replace",2,(function(t,e,a,r){var b=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=r.REPLACE_KEEPS_$0,w=b?"$":"$0";return[function(a,r){var n=c(this),o=void 0==a?void 0:a[t];return void 0!==o?o.call(a,n,r):e.call(String(n),a,r)},function(t,r){if(!b&&m||"string"===typeof r&&-1===r.indexOf(w)){var o=a(e,t,this,r);if(o.done)return o.value}var c=n(t),h=String(this),v="function"===typeof r;v||(r=String(r));var g=c.global;if(g){var k=c.unicode;c.lastIndex=0}var $=[];while(1){var S=f(c,h);if(null===S)break;if($.push(S),!g)break;var E=String(S[0]);""===E&&(c.lastIndex=u(h,s(c.lastIndex),k))}for(var x="",I=0,P=0;P<$.length;P++){S=$[P];for(var R=String(S[0]),_=l(d(i(S.index),h.length),0),C=[],A=1;A<S.length;A++)C.push(p(S[A]));var O=S.groups;if(v){var j=[R].concat(C,_,h);void 0!==O&&j.push(O);var T=String(r.apply(void 0,j))}else T=y(R,h,_,C,O,r);_>=I&&(x+=h.slice(I,_)+T,I=_+R.length)}return x+h.slice(I)}];function y(t,a,r,n,s,i){var c=r+t.length,u=n.length,f=g;return void 0!==s&&(s=o(s),f=v),e.call(i,f,(function(e,o){var i;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return a.slice(0,r);case"'":return a.slice(c);case"<":i=s[o.slice(1,-1)];break;default:var f=+o;if(0===f)return e;if(f>u){var l=h(f/10);return 0===l?e:l<=u?void 0===n[l-1]?o.charAt(1):n[l-1]+o.charAt(1):e}i=n[f-1]}return void 0===i?"":i}))}}))},"6b42":function(t,e,a){"use strict";var r=a("33a7"),n=a.n(r);n.a},7156:function(t,e,a){var r=a("861d"),n=a("d2bb");t.exports=function(t,e,a){var o,s;return n&&"function"==typeof(o=e.constructor)&&o!==a&&r(s=o.prototype)&&s!==a.prototype&&n(t,s),t}},a15b:function(t,e,a){"use strict";var r=a("23e7"),n=a("44ad"),o=a("fc6a"),s=a("a640"),i=[].join,c=n!=Object,u=s("join",",");r({target:"Array",proto:!0,forced:c||!u},{join:function(t){return i.call(o(this),void 0===t?",":t)}})},bee2:function(t,e,a){"use strict";function r(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e,a){return e&&r(t.prototype,e),a&&r(t,a),t}a.d(e,"a",(function(){return n}))},cc73:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var r=a("d4ec"),n=a("bee2"),o=function(){function t(){Object(r["a"])(this,t),this.phone={reg:/^1[3456789]\d{9}$/,msg:"请填写正确手机号"},this.nickName={reg:/^[0-9a-zA-Z\u4e00-\u9fa5]{1,8}$/,msg:"昵称必须含有字母,数字字母汉字组合"},this.password={reg:/^[a-zA-Z][^\u4e00-\u9fa5]{5,15}$/,msg:"密码首个字符是字母且不能含有汉字"},this.email={reg:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,msg:"邮箱格式不正确"}}return Object(n["a"])(t,[{key:"validForm",value:function(t,e){for(var a in t)if(!this[a].reg.test(t[a]))return e.$toast(this[a].msg),!1;return!0}}]),t}(),s=new o},d4ec:function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}a.d(e,"a",(function(){return r}))},fa7d:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a("4160"),a("a15b"),a("fb6a"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("5319"),a("159b");var r=a("d4ec"),n=a("bee2"),o=function(){function t(){Object(r["a"])(this,t)}return Object(n["a"])(t,[{key:"transformRequest",value:function(t){var e="";for(var a in t)e+=a+"="+t[a]+"&";return e}},{key:"getCookies",value:function(t,e){var a={};return t.forEach((function(t){a[t]=e.$cookies.get(t)})),a}},{key:"getToken",value:function(t){var e=["t0","t1","t2"],a=[];return e.forEach((function(e){a.push(t.$cookies.get(e))})),a.join(".")}},{key:"formatDate",value:function(t,e){var a=t.getFullYear().toString();if(/(y+)/.test(e)){var r=RegExp.$1;e=e.replace(r,a.slice(a.length-r.length))}var n={M:t.getMonth()+1,d:t.getDate(),h:t.getHours(),m:t.getMinutes(),s:t.getSeconds()};for(var o in n){var s=new RegExp("(".concat(o,"{1,2})"));if(s.test(e)){var i=RegExp.$1,c=n[o]>=10||1==i.length?n[o]:"0"+n[o];e=e.replace(i,c)}}return e}}]),t}(),s=new o}}]);
//# sourceMappingURL=chunk-945dcf0c.981af22f.js.map